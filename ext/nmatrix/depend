dtypes.h dtypes.c smmp1.c smmp2.c blas1.c blas2.c: generator.rb
	$(RUBY) -I$(srcdir) $(srcdir)/generator.rb

smmp.o: smmp.c smmp.h smmp/smmp_header.template.c smmp/symbmm.template.c smmp/transp.template.c smmp/numbmm.template.c

blas.o: blas.c nmatrix_config.h smmp.h

dfuncs.o: dfuncs.c $(hdrdir)/ruby.h

$(DLLIB): dtypes.h dtypes.c dfuncs.c $(OBJS) Makefile
	# $(ECHO) linking shared-object $(DLLIB)
	@-$(RM) $(@)
	$(Q) $(LDSHARED) -o $@ $(OBJS) $(LIBPATH) $(DLDFLAGS) $(LOCAL_LIBS) $(LIBS)
